<ContentDialog
    x:Class="MyShopClient.Views.Products.AddCategoryDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShopClient.Views.Products"
    xmlns:helpers="using:MyShopClient.Helpers"
    Title="Thêm Danh Mục Mới"
    PrimaryButtonText="Lưu"
    SecondaryButtonText="Hủy"
    PrimaryButtonCommand="{x:Bind ViewModel.SaveCommand}"
    SecondaryButtonCommand="{x:Bind ViewModel.CancelCommand}"
    DefaultButton="Primary"
    Style="{StaticResource DefaultContentDialogStyle}">
    
    <ContentDialog.Resources>
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Form Label Style -->
        <Style x:Key="FormLabelStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource TextPrimaryBrush}"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Margin" Value="0,0,0,6"/>
        </Style>
        
        <!-- Required Indicator Style -->
        <Style x:Key="RequiredIndicatorStyle" TargetType="TextBlock">
            <Setter Property="Foreground" Value="{ThemeResource DangerBrush}"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Margin" Value="2,0,0,0"/>
        </Style>
    </ContentDialog.Resources>
    
    <StackPanel Spacing="20" Width="400" Padding="0,8">
        
        <!-- Error Message Banner -->
        <InfoBar
            IsOpen="{x:Bind ViewModel.HasErrors, Mode=OneWay}"
            Severity="Error"
            Title="Lỗi xác thực"
            Message="{x:Bind ViewModel.ErrorMessage, Mode=OneWay}"
            IsClosable="False"/>
        
        <!-- Category Name -->
        <StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Tên danh mục" Style="{StaticResource FormLabelStyle}"/>
                <TextBlock Text="*" Style="{StaticResource RequiredIndicatorStyle}"/>
            </StackPanel>
            <TextBox 
                PlaceholderText="Nhập tên danh mục..."
                Text="{x:Bind ViewModel.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                HorizontalAlignment="Stretch"/>
        </StackPanel>
        
        <!-- Description -->
        <StackPanel>
            <TextBlock Text="Mô tả" Style="{StaticResource FormLabelStyle}"/>
            <TextBox 
                PlaceholderText="Nhập mô tả danh mục (tùy chọn)..."
                Text="{x:Bind ViewModel.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                TextWrapping="Wrap"
                AcceptsReturn="True"
                Height="100"
                HorizontalAlignment="Stretch"/>
        </StackPanel>
        
        <!-- Loading Indicator -->
        <ProgressBar 
            IsIndeterminate="True"
            Visibility="{x:Bind ViewModel.IsSaving, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}"/>
        
    </StackPanel>
</ContentDialog>
