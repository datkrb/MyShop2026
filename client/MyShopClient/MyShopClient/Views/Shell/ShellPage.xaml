<Page
    x:Class="MyShopClient.Views.ShellPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:MyShopClient.Views"
    xmlns:helpers="using:MyShopClient.Helpers"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Background="{ThemeResource AppBackgroundBrush}"
    mc:Ignorable="d">

    <Page.Resources>
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
        
        <!-- Custom NavigationView Style -->
        <Style x:Key="CustomNavigationViewStyle" TargetType="NavigationView">
            <Setter Property="IsPaneToggleButtonVisible" Value="True"/>
            <Setter Property="IsBackButtonVisible" Value="Collapsed"/>
            <Setter Property="OpenPaneLength" Value="200"/>
            <Setter Property="CompactPaneLength" Value="50"/>
        </Style>

    </Page.Resources>

    <Grid>
        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="WideState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="1024"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode" Value="Left"/>
                        <Setter Target="NavView.IsPaneOpen" Value="True"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="NarrowState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0"/>
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="NavView.PaneDisplayMode" Value="LeftCompact"/>
                        <Setter Target="NavView.IsPaneOpen" Value="False"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <NavigationView x:Name="NavView"
                        Style="{StaticResource CustomNavigationViewStyle}"
                        IsSettingsVisible="False"
                        IsBackButtonVisible="Auto"
                        IsBackEnabled="{x:Bind ViewModel.CanGoBack, Mode=OneWay}"
                        BackRequested="NavView_BackRequested"
                        SelectionChanged="NavView_SelectionChanged">

        <!-- Menu Items -->
        <NavigationView.MenuItems>
            <!-- Main Menu Header -->
            <NavigationViewItem Content="Dashboard" Tag="Dashboard">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE74C;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Products" Tag="Products">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE781;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Orders" Tag="Orders">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE7BF;" FontFamily="{ThemeResource SymbolThemeFontFamily}" Margin="0,0,5,0"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Customers" Tag="Customers">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE77B;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Promotions" Tag="Promotions" 
                                Visibility="{x:Bind ViewModel.IsAdmin, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE8D4;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Employees" Tag="Employees" 
                                Visibility="{x:Bind ViewModel.IsAdmin, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE716;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Reports" Tag="Reports">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE9D2;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

            <NavigationViewItem Content="Settings" Tag="Settings">
                <NavigationViewItem.Icon>
                    <FontIcon Glyph="&#xE713;" FontFamily="{ThemeResource SymbolThemeFontFamily}"/>
                </NavigationViewItem.Icon>
            </NavigationViewItem>

        </NavigationView.MenuItems>

        <!-- Content Frame -->
        <Frame x:Name="ContentFrame"/>
    </NavigationView>
    </Grid>
</Page>
